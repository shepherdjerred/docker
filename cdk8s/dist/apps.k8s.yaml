apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: 1password
  namespace: argocd
spec:
  destination:
    namespace: 1password
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: connect
    helm:
      parameters:
        - name: operator.autoRestart
          value: "true"
        - name: operator.create
          value: "true"
        - name: operator.pollingInterval
          value: "60"
    repoURL: https://1password.github.io/connect-helm-charts/
    targetRevision: 1.15.0
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: argocd
  namespace: argocd
spec:
  destination:
    namespace: argocd
    server: https://kubernetes.default.svc
  project: default
  source:
    path: manifests/
    repoURL: https://github.com/argoproj/argo-cd
    targetRevision: stable
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: onepassword.com/v1
kind: OnePasswordItem
metadata:
  name: operator-oauth
  namespace: tailscale
spec:
  itemPath: vaults/v64ocnykdqju4ui6j6pua56xw4/items/mboftvs4fyptyqvg3anrfjy6vu
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: tailscale
  namespace: argocd
spec:
  destination:
    namespace: tailscale
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: tailscale-operator
    repoURL: https://pkgs.tailscale.com/helmcharts
    targetRevision: 1.62.1
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: lamport
  namespace: argocd
spec:
  destination:
    namespace: lamport
    server: https://kubernetes.default.svc
  project: default
  source:
    path: cdk8s/dist/
    repoURL: https://github.com/shepherdjerred/servers
    targetRevision: main
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: immich
  namespace: argocd
spec:
  destination:
    namespace: immich
    server: https://kubernetes.default.svc
  project: default
  source:
    helm:
      parameters:
        - name: postgresql.enabled
          value: "true"
        - name: redis.enabled
          value: "true"
        - name: immich.persistence.library.existingClaim
          value: immich-volume
        - name: image.tag
          value: v1.102.3
    path: charts/immich
    repoURL: https://github.com/immich-app/immich-charts/
    targetRevision: immich-0.6.0
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: prometheus
  namespace: argocd
spec:
  destination:
    namespace: prometheus
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: kube-prometheus-stack
    repoURL: https://prometheus-community.github.io/helm-charts
    targetRevision: 58.0.0
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
      - ServerSideApply=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: intel-device-plugin-operator
  namespace: argocd
spec:
  destination:
    namespace: intel-device-plugin-operator
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: intel-device-plugins-operator
    repoURL: https://intel.github.io/helm-charts/
    targetRevision: 0.29.0
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: intel-gpu-device-plugin
  namespace: argocd
spec:
  destination:
    namespace: gpu-device-plugin
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: intel-device-plugins-gpu
    helm:
      parameters:
        - name: sharedDevNum
          value: "10"
        - name: nodeFeatureRule
          value: "true"
        - name: resourceManager
          value: "false"
    repoURL: https://intel.github.io/helm-charts/
    targetRevision: 0.29.0
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: cert-manager
  namespace: argocd
spec:
  destination:
    namespace: cert-manager
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: cert-manager
    helm:
      parameters:
        - name: installCRDs
          value: "true"
    repoURL: https://charts.jetstack.io
    targetRevision: v1.14.4
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: nfd
  namespace: argocd
spec:
  destination:
    namespace: node-feature-discovery
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: node-feature-discovery
    repoURL: https://kubernetes-sigs.github.io/node-feature-discovery/charts
    targetRevision: 0.15.4
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: minio
  namespace: argocd
spec:
  destination:
    namespace: minio
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: minio
    repoURL: https://charts.bitnami.com/bitnami
    targetRevision: 14.1.7
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: system-upgrade-controller
  namespace: argocd
spec:
  destination:
    namespace: system-upgrade
    server: https://kubernetes.default.svc
  project: default
  source:
    path: manifests/
    repoURL: https://github.com/rancher/system-upgrade-controller/
    targetRevision: v0.13.4
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: onepassword.com/v1
kind: OnePasswordItem
metadata:
  name: tailscale-auth-key
  namespace: jenkins
spec:
  itemPath: vaults/v64ocnykdqju4ui6j6pua56xw4/items/pl26aljvglq2twmx64kohlqdja
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: jenkins
  namespace: argocd
spec:
  destination:
    namespace: jenkins
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: jenkins
    helm:
      parameters:
        - name: controller.jenkinsUrl
          value: https://jenkins.tailnet-1a49.ts.net
    repoURL: https://charts.jenkins.io
    targetRevision: 5.1.6
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: volsync
  namespace: argocd
spec:
  destination:
    namespace: volsync-system
    server: https://kubernetes.default.svc
  project: default
  source:
    chart: volsync
    repoURL: https://backube.github.io/helm-charts/
    targetRevision: 0.9.1
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: external-snapshotter-crds
  namespace: argocd
spec:
  destination:
    namespace: external-snapshotter
    server: https://kubernetes.default.svc
  project: default
  source:
    path: client/config/crd/
    repoURL: https://github.com/kubernetes-csi/external-snapshotter
    targetRevision: release-7.0
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: supabase
  namespace: argocd
spec:
  destination:
    namespace: supabase
    server: https://kubernetes.default.svc
  project: default
  source:
    helm:
      parameters:
        - name: studio.envrionment.STUDIO_DEFAULT_ORGANIZATION
          value: sjerred
        - name: studio.envrionment.STUDIO_DEFAULT_PROJECT
          value: sjerred
        - name: studio.envrionment.SUPABASE_PUBLIC_URL
          value: https://supabase.tailnet-1a49.ts.net
        - name: auth.environment.API_EXTERNAL_URL
          value: https://supabase-api.tailnet-1a49.ts.net
        - name: auth.environment.GOTRUE_SITE_URL
          value: https://supabase-gotrue.tailnet-1a49.ts.net
        - name: secret.jwt.secretRef
          value: supabase-secret
        - name: secret.jwt.secretRefKey.anonKey
          value: jwt_anon_key
        - name: secret.jwt.secretRefKey.serviceKey
          value: jwt_service_key
        - name: secret.jwt.secretRefKey.secret
          value: jwt_secret
        - name: secret.db.secretRef
          value: supabase-secret
        - name: secret.db.secretRefKey.password
          value: db_password
        - name: secret.db.secretRefKey.username
          value: db_username
        - name: secret.db.secretRefKey.database
          value: db_database
        - name: secret.dashboard.secretRef
          value: supabase-secret
        - name: secret.dashboard.secretRefKey.password
          value: dashboard_password
        - name: secret.dashboard.secretRefKey.username
          value: dashboard_username
        - name: secret.analytics.secretRef
          value: supabase-secret
        - name: smtp.secretRef
          value: supabase-secret
        - name: smtp.secretRefKey.username
          value: smtp_username
        - name: smtp.secretRefKey.password
          value: smtp_password
        - name: secret.analytics.secretRefKey.apiKey
          value: analytics_api_key
        - name: db.image.tag
          value: 15.1.1.46
        - name: studio.image.tag
          value: 20240429-7341b30
        - name: auth.image.tag
          value: v2.150.1
        - name: realtime.image.tag
          value: v2.28.32
        - name: meta.image.tag
          value: v0.80.1
        - name: storage.image.tag
          value: v1.2.1
        - name: analytics.image.tag
          value: 1.6.5
        - name: functions.image.tag
          value: v1.46.3
        - name: vector.image.tag
          value: 0.38.0.custom.c128e6f-debian
    path: charts/supabase
    repoURL: https://github.com/supabase-community/supabase-kubernetes
    targetRevision: main
  syncPolicy:
    automated: {}
    syncOptions:
      - CreateNamespace=true
